<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Dumpling Web</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ©µ</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- Twemoji for Windows 10 emoji support -->
    <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="floating-emojis" id="floating-emojis"></div>

    <div class="container">
        <h1>ğŸ©µ Late Proposal Of Love! ğŸ©µ</h1>
        
        <div class="gif-container">
            <img id="main-gif" src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExdzA1b3NkaHl1MnZuOG56ZnQxNjgzaXVkZWJncGRrNjZ2b2F0cTA1dSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/F4kMBYgYPv2tWWJvVE/giphy.gif" alt="Cute animation" class="gif">
        </div>

        <div class="message" id="message">Will you be my girlfriend?</div>

        <div class="button-container">
            <button class="yes-btn" onclick="handleYes()">Yes! ğŸ©µ</button>
            <button class="no-btn" id="no-btn" onclick="handleNo()">No</button>
        </div>

        <div id="response" class="response-message"></div>

        <!-- Love Letter with Envelope -->
        <div class="letter-container" id="letter-container">
            <div id="envelope" class="close">
                <div class="front flap"></div>
                <div class="front pocket"></div>
                <div class="letter">
                    <div class="words line1">To: My Dumpling ğŸ©µ</div>
                    <div class="words main-text" id="letter-content"></div>
                    <div class="words signature">With all my love,<br><span id="sender-name">Your Love Elias</span></div>
                    <div class="words ps">P.S. - You're absolutely amazing! ğŸ©µ</div>
                </div>
                <div class="hearts">
                    <div class="heart a1"></div>
                    <div class="heart a2"></div>
                    <div class="heart a3"></div>
                </div>
            </div>

            <div class="letter-button-container">
                <button class="letter-button" id="letter-button" onclick="toggleLetter()">Close Letter</button>
                <button class="scale-btn" id="scale-btn" onclick="goToScalePage()">How Happy Are You Dumpling? ğŸ¥Ÿ</button>
            </div>
        </div>

        <button class="reset-btn" id="reset-btn" onclick="location.reload()">Start Over</button>
    </div>

    <!-- Final Completion Modal -->
    <div id="final-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-emoji">ğŸ¥ŸğŸ©µâœ¨</div>
            <h2 class="modal-title">Thank you little dumpling</h2>
            <p class="modal-text">Thank you for making my galaxy brighter. Ready to end our little adventure for now?</p>
            <div class="scale-button-container">
                <button class="scale-btn-nav back" onclick="closeFinalModal()">â† Back</button>
                <button class="scale-btn-nav" onclick="goodbyeAndClose()">Goodbye ğŸ’™</button>
            </div>
        </div>
    </div>
    <!-- Celebration Modal -->
    <div id="celebrate-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-emoji">ğŸ¥Ÿâœ¨ğŸ©µğŸŒ™</div>
            <h2 class="modal-title">Dumpling Love Activated!</h2>
            <p class="modal-text">You made the constellations twinkle, my little dumpling! ğŸ¥ŸğŸ’«</p>
            <button class="modal-close" onclick="closeCelebrationModal()">Close</button>
        </div>
    </div>

    <script>
        // Initialize Twemoji for Windows 10 emoji support
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof twemoji !== 'undefined') {
                twemoji.parse(document.body, { 
                    folder: 'svg', 
                    ext: '.svg',
                    callback: function(icon, options, variant) {
                        switch (icon) {
                            case '1fa75': return false; // ğŸ¥Ÿ dumpling
                            case '1fa77': return false; // ğŸ©µ light blue heart
                            case '2728': return false; // âœ¨ sparkles
                            case '1f319': return false; // ğŸŒ™ moon
                            case '2601': return false; // â˜ï¸ cloud
                            case '2b50': return false; // â­ star
                            case '1f4ab': return false; // ğŸ’« dizzy star
                            case '1faf6': return false; // ğŸ«¶ heart hands
                            default: return false;
                        }
                    }
                });
            }
        });
    </script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>